# Redis Lists ì§ì ‘ êµ¬í˜„í•˜ë©° ë°°ìš°ê¸°

## ğŸ“‹ Stage ëª©ë¡

| Stage | ì œëª© | ë‚œì´ë„ |
|-------|------|--------|
| 1 | ë¦¬ìŠ¤íŠ¸ ìƒì„±í•˜ê¸° | â¬¤â—‹â—‹ ì‰¬ì›€ |
| 2 | ìš”ì†Œ ì¶”ê°€í•˜ê¸° (RPUSH) | â¬¤â—‹â—‹ ì‰¬ì›€ |
| 3 | ì—¬ëŸ¬ ìš”ì†Œ ì¶”ê°€í•˜ê¸° | â¬¤â—‹â—‹ ì‰¬ì›€ |
| 4 | ìš”ì†Œ ì¡°íšŒí•˜ê¸° - ì–‘ìˆ˜ ì¸ë±ìŠ¤ (LRANGE) | â¬¤â—‹â—‹ ì‰¬ì›€ |
| 5 | ìš”ì†Œ ì¡°íšŒí•˜ê¸° - ìŒìˆ˜ ì¸ë±ìŠ¤ | â¬¤â—‹â—‹ ì‰¬ì›€ |
| 6 | ì•ì— ìš”ì†Œ ì¶”ê°€í•˜ê¸° (LPUSH) | â¬¤â—‹â—‹ ì‰¬ì›€ |
| **7** | **ë¦¬ìŠ¤íŠ¸ ê¸¸ì´ ì¡°íšŒí•˜ê¸° (LLEN)** | â¬¤â—‹â—‹ ì‰¬ì›€ |
| 8 | ìš”ì†Œ ì œê±°í•˜ê¸° (LPOP/RPOP) | â¬¤â—‹â—‹ ì‰¬ì›€ |
| 9 | ì—¬ëŸ¬ ìš”ì†Œ ì œê±°í•˜ê¸° | â¬¤â—‹â—‹ ì‰¬ì›€ |
| 10 | ë¸”ë¡œí‚¹ ì¡°íšŒ (BLPOP/BRPOP) | â¬¤â¬¤â—‹ ë³´í†µ |
| 11 | íƒ€ì„ì•„ì›ƒì´ ìˆëŠ” ë¸”ë¡œí‚¹ ì¡°íšŒ | â¬¤â¬¤â—‹ ë³´í†µ |

---

## Stage 7: ë¦¬ìŠ¤íŠ¸ ê¸¸ì´ ì¡°íšŒí•˜ê¸° (LLEN)

### ğŸ¯ ëª©í‘œ

`LLEN` ëª…ë ¹ì–´ë¥¼ êµ¬í˜„í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ì˜ **ìš”ì†Œ ê°œìˆ˜**ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

---

### ğŸ“š ë°°ê²½ ì§€ì‹

#### LLEN ëª…ë ¹ì–´

```
LLEN <key>
```

ë¦¬ìŠ¤íŠ¸ì— ì €ì¥ëœ ìš”ì†Œì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

```bash
RPUSH mylist "a" "b" "c"
LLEN mylist    # ì‘ë‹µ: 3
```

#### íŠ¹ìˆ˜ ì¼€ì´ìŠ¤

| ì¼€ì´ìŠ¤ | ì‘ë‹µ |
|--------|------|
| ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í‚¤ | `0` (ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì·¨ê¸‰) |
| ë¹ˆ ë¦¬ìŠ¤íŠ¸ | `0` |
| String íƒ€ì… í‚¤ | `WRONGTYPE` ì—ëŸ¬ |

#### ì‹œê°„ ë³µì¡ë„

`LLEN`ì€ **O(1)** ì…ë‹ˆë‹¤. RedisëŠ” ë¦¬ìŠ¤íŠ¸ ê¸¸ì´ë¥¼ ë³„ë„ë¡œ ì €ì¥í•˜ë¯€ë¡œ ìš”ì†Œë¥¼ ì„¸ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.

#### ì‹¤ë¬´ í™œìš©

```bash
# ëŒ€ê¸° ì¤‘ì¸ ì‘ì—… ìˆ˜ í™•ì¸
LLEN job_queue
# ì‘ë‹µ: 42

# ì¡°ê±´ë¶€ ì²˜ë¦¬
if (LLEN queue > 1000) {
    # íê°€ ë„ˆë¬´ ê¸¸ë©´ ê²½ê³ 
}
```

---

### âœ… í†µê³¼ ì¡°ê±´

- `LLEN <key>` ëª…ë ¹ì–´ë¡œ ë¦¬ìŠ¤íŠ¸ ê¸¸ì´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤
- ì‘ë‹µì€ RESP Integer í˜•ì‹(`:N\r\n`)ì´ì–´ì•¼ í•©ë‹ˆë‹¤
- ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í‚¤ëŠ” `0`ì„ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤
- String íƒ€ì… í‚¤ì— ëŒ€í•´ì„œëŠ” WRONGTYPE ì—ëŸ¬ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤

---

### ğŸ’¡ íŒíŠ¸

```kotlin
"LLEN" -> {
    if (command.args.isEmpty()) {
        writer.write("-ERR wrong number of arguments for 'llen' command\r\n")
        writer.flush()
        return
    }
    
    val key = command.args[0]
    
    // íƒ€ì… ì¶©ëŒ ì²´í¬
    if (stringStore.containsKey(key)) {
        writer.write("-WRONGTYPE Operation against a key holding the wrong kind of value\r\n")
        writer.flush()
        return
    }
    
    val list = listStore[key]
    val length = list?.size ?: 0
    
    writer.write(":$length\r\n")
}
```

---

### ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

```bash
# ë¦¬ìŠ¤íŠ¸ ìƒì„± ë° ê¸¸ì´ í™•ì¸
redis-cli RPUSH mylist "a" "b" "c" "d" "e"
# ì˜ˆìƒ ì¶œë ¥: (integer) 5

redis-cli LLEN mylist
# ì˜ˆìƒ ì¶œë ¥: (integer) 5

# ìš”ì†Œ ì¶”ê°€ í›„ ê¸¸ì´ í™•ì¸
redis-cli RPUSH mylist "f"
# ì˜ˆìƒ ì¶œë ¥: (integer) 6

redis-cli LLEN mylist
# ì˜ˆìƒ ì¶œë ¥: (integer) 6

# ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í‚¤
redis-cli LLEN nonexistent
# ì˜ˆìƒ ì¶œë ¥: (integer) 0

# íƒ€ì… ì¶©ëŒ
redis-cli SET stringkey "hello"
# ì˜ˆìƒ ì¶œë ¥: OK

redis-cli LLEN stringkey
# ì˜ˆìƒ ì¶œë ¥: (error) WRONGTYPE Operation against a key holding the wrong kind of value
```

---

### ğŸ¤” ìƒê°í•´ë³¼ ì 

1. **O(1) êµ¬í˜„**: í˜„ì¬ êµ¬í˜„ì—ì„œ `list.size`ëŠ” O(1)ì¼ê¹Œìš”? Javaì˜ `ArrayList`ì™€ `LinkedList`ì—ì„œ ê°ê° ì–´ë–¨ê¹Œìš”?

2. **ë¹ˆ ë¦¬ìŠ¤íŠ¸ ì²˜ë¦¬**: ëª¨ë“  ìš”ì†Œê°€ ì œê±°ëœ ë¦¬ìŠ¤íŠ¸ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”? RedisëŠ” ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ìë™ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤.

---

### â¡ï¸ ë‹¤ìŒ ë‹¨ê³„

Stage 8ì—ì„œëŠ” `LPOP`ê³¼ `RPOP` ëª…ë ¹ì–´ë¡œ ë¦¬ìŠ¤íŠ¸ì—ì„œ **ìš”ì†Œë¥¼ ì œê±°**í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
